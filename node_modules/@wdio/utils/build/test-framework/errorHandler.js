"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.logHookError = void 0;
/**
 * notify `WDIOCLInterface` about failure in hook
 * we need to do it this way because `beforeFn` and `afterFn` are not real hooks.
 * Otherwise hooks failures are lost.
 *
 * @param {string}  hookName    name of the hook
 * @param {Array}   hookResults hook functions results array
 * @param {string}  cid         cid
 */
exports.logHookError = (hookName, hookResults = [], cid) => {
    const result = hookResults.find(result => result instanceof Error);
    if (typeof result === 'undefined') {
        return;
    }
    /**
     * need to convert Error to plain object, otherwise it is lost on process.send
     */
    const error = { message: result.message };
    const content = {
        cid: cid,
        error: error,
        fullTitle: `${hookName} Hook`,
        type: 'hook',
        state: 'fail'
    };
    process.send({
        origin: 'reporter',
        name: 'printFailureMessage',
        content
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3JIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Rlc3QtZnJhbWV3b3JrL2Vycm9ySGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTs7Ozs7Ozs7R0FRRztBQUNVLFFBQUEsWUFBWSxHQUFHLENBQUMsUUFBZ0IsRUFBRSxjQUFxQixFQUFFLEVBQUUsR0FBVyxFQUFFLEVBQUU7SUFDbkYsTUFBTSxNQUFNLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sWUFBWSxLQUFLLENBQUMsQ0FBQTtJQUNsRSxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtRQUMvQixPQUFNO0tBQ1Q7SUFFRDs7T0FFRztJQUNILE1BQU0sS0FBSyxHQUFHLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUV6QyxNQUFNLE9BQU8sR0FBRztRQUNaLEdBQUcsRUFBRSxHQUFHO1FBQ1IsS0FBSyxFQUFFLEtBQUs7UUFDWixTQUFTLEVBQUUsR0FBRyxRQUFRLE9BQU87UUFDN0IsSUFBSSxFQUFFLE1BQU07UUFDWixLQUFLLEVBQUUsTUFBTTtLQUNoQixDQUFBO0lBRUQsT0FBTyxDQUFDLElBQUssQ0FBQztRQUNWLE1BQU0sRUFBRSxVQUFVO1FBQ2xCLElBQUksRUFBRSxxQkFBcUI7UUFDM0IsT0FBTztLQUNWLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQSJ9