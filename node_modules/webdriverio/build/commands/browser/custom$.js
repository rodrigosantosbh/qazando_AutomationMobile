"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const getElementObject_1 = require("../../utils/getElementObject");
const constants_1 = require("../../constants");
/**
 *
 * The `custom$` allows you to use a custom strategy declared by using `browser.addLocatorStrategy`
 *
 * <example>
    :example.js
    it('should fetch the project title', () => {
        browser.url('https://webdriver.io')
        browser.addLocatorStrategy('myStrat', (selector) => {
            return document.querySelectorAll(selector)
        })

        const projectTitle = browser.custom$('myStrat', '.projectTitle')

        console.log(projectTitle.getText()) // WEBDRIVER I/O
    })
 * </example>
 *
 * @alias custom$
 * @param {String} strategyName
 * @param {Any} strategyArguments
 * @return {Element}
 */
async function custom$(strategyName, ...strategyArguments) {
    const strategy = this.strategies.get(strategyName);
    if (!strategy) {
        throw Error('No strategy found for ' + strategyName);
    }
    let res = await this.execute(strategy, ...strategyArguments);
    /**
     * if the user's script returns multiple elements
     * then we just return the first one as this method
     * is intended to return just one element
     */
    if (Array.isArray(res)) {
        res = res[0];
    }
    if (res && typeof res[constants_1.ELEMENT_KEY] === 'string') {
        return await getElementObject_1.getElement.call(this, strategy.toString(), res);
    }
    throw Error('Your locator strategy script must return an element');
}
exports.default = custom$;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tJC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9icm93c2VyL2N1c3RvbSQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxtRUFBeUQ7QUFDekQsK0NBQTZDO0FBRTdDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBc0JHO0FBQ1ksS0FBSyxVQUFVLE9BQU8sQ0FFakMsWUFBb0IsRUFDcEIsR0FBRyxpQkFBd0I7SUFFM0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUE7SUFFbEQsSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUNYLE1BQU0sS0FBSyxDQUFDLHdCQUF3QixHQUFHLFlBQVksQ0FBQyxDQUFBO0tBQ3ZEO0lBRUQsSUFBSSxHQUFHLEdBQTBDLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FDL0QsUUFBUSxFQUNSLEdBQUcsaUJBQWlCLENBQ3ZCLENBQUE7SUFFRDs7OztPQUlHO0lBQ0gsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ3BCLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDZjtJQUVELElBQUksR0FBRyxJQUFJLE9BQU8sR0FBRyxDQUFDLHVCQUFXLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDN0MsT0FBTyxNQUFNLDZCQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUE7S0FDL0Q7SUFFRCxNQUFNLEtBQUssQ0FBQyxxREFBcUQsQ0FBQyxDQUFBO0FBQ3RFLENBQUM7QUE5QkQsMEJBOEJDIn0=